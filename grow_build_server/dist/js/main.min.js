!function(root,factory){"function"==typeof define&&define.amd?define([],function(){return factory(root)}):"object"==typeof exports?module.exports=factory(root):root.SmoothScroll=factory(root)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(window){"use strict";var supports="querySelector"in document&&"addEventListener"in window&&"requestAnimationFrame"in window&&"closest"in window.Element.prototype,defaults={ignore:"[data-scroll-ignore]",header:null,speed:500,offset:0,easing:"easeInOutCubic",customEasing:null,before:function(){},after:function(){}},extend=function(){for(var extended={},i=0,length=arguments.length,merge=function(obj){for(var prop in obj)obj.hasOwnProperty(prop)&&(extended[prop]=obj[prop])};length>i;i++){var obj=arguments[i];merge(obj)}return extended},getHeight=function(elem){return parseInt(window.getComputedStyle(elem).height,10)},escapeCharacters=function(id){"#"===id.charAt(0)&&(id=id.substr(1));for(var codeUnit,string=String(id),length=string.length,index=-1,result="",firstCodeUnit=string.charCodeAt(0);++index<length;){if(codeUnit=string.charCodeAt(index),0===codeUnit)throw new InvalidCharacterError("Invalid character: the input contains U+0000.");result+=codeUnit>=1&&31>=codeUnit||127==codeUnit||0===index&&codeUnit>=48&&57>=codeUnit||1===index&&codeUnit>=48&&57>=codeUnit&&45===firstCodeUnit?"\\"+codeUnit.toString(16)+" ":codeUnit>=128||45===codeUnit||95===codeUnit||codeUnit>=48&&57>=codeUnit||codeUnit>=65&&90>=codeUnit||codeUnit>=97&&122>=codeUnit?string.charAt(index):"\\"+string.charAt(index)}return"#"+result},easingPattern=function(settings,time){var pattern;return"easeInQuad"===settings.easing&&(pattern=time*time),"easeOutQuad"===settings.easing&&(pattern=time*(2-time)),"easeInOutQuad"===settings.easing&&(pattern=.5>time?2*time*time:-1+(4-2*time)*time),"easeInCubic"===settings.easing&&(pattern=time*time*time),"easeOutCubic"===settings.easing&&(pattern=--time*time*time+1),"easeInOutCubic"===settings.easing&&(pattern=.5>time?4*time*time*time:(time-1)*(2*time-2)*(2*time-2)+1),"easeInQuart"===settings.easing&&(pattern=time*time*time*time),"easeOutQuart"===settings.easing&&(pattern=1- --time*time*time*time),"easeInOutQuart"===settings.easing&&(pattern=.5>time?8*time*time*time*time:1-8*--time*time*time*time),"easeInQuint"===settings.easing&&(pattern=time*time*time*time*time),"easeOutQuint"===settings.easing&&(pattern=1+--time*time*time*time*time),"easeInOutQuint"===settings.easing&&(pattern=.5>time?16*time*time*time*time*time:1+16*--time*time*time*time*time),settings.customEasing&&(pattern=settings.customEasing(time)),pattern||time},getDocumentHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},getEndLocation=function(anchor,headerHeight,offset){var location=0;if(anchor.offsetParent)do location+=anchor.offsetTop,anchor=anchor.offsetParent;while(anchor);return location=Math.max(location-headerHeight-offset,0)},getHeaderHeight=function(header){return header?getHeight(header)+header.offsetTop:0},adjustFocus=function(anchor,endLocation,isNum){isNum||(anchor.focus(),document.activeElement.id!==anchor.id&&(anchor.setAttribute("tabindex","-1"),anchor.focus(),anchor.style.outline="none"),window.scrollTo(0,endLocation))},reduceMotion=function(settings){return"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches?!0:!1},SmoothScroll=function(selector,options){var settings,anchor,toggle,fixedHeader,headerHeight,eventTimeout,animationInterval,smoothScroll={};smoothScroll.cancelScroll=function(){cancelAnimationFrame(animationInterval)},smoothScroll.animateScroll=function(anchor,toggle,options){var animateSettings=extend(settings||defaults,options||{}),isNum="[object Number]"===Object.prototype.toString.call(anchor)?!0:!1,anchorElem=isNum||!anchor.tagName?null:anchor;if(isNum||anchorElem){var startLocation=window.pageYOffset;animateSettings.header&&!fixedHeader&&(fixedHeader=document.querySelector(animateSettings.header)),headerHeight||(headerHeight=getHeaderHeight(fixedHeader));var start,percentage,position,endLocation=isNum?anchor:getEndLocation(anchorElem,headerHeight,parseInt("function"==typeof animateSettings.offset?animateSettings.offset():animateSettings.offset,10)),distance=endLocation-startLocation,documentHeight=getDocumentHeight(),timeLapsed=0,stopAnimateScroll=function(position,endLocation){var currentLocation=window.pageYOffset;return position==endLocation||currentLocation==endLocation||(endLocation>startLocation&&window.innerHeight+currentLocation)>=documentHeight?(smoothScroll.cancelScroll(),adjustFocus(anchor,endLocation,isNum),animateSettings.after(anchor,toggle),start=null,!0):void 0},loopAnimateScroll=function(timestamp){start||(start=timestamp),timeLapsed+=timestamp-start,percentage=timeLapsed/parseInt(animateSettings.speed,10),percentage=percentage>1?1:percentage,position=startLocation+distance*easingPattern(animateSettings,percentage),window.scrollTo(0,Math.floor(position)),stopAnimateScroll(position,endLocation)||(window.requestAnimationFrame(loopAnimateScroll),start=timestamp)};0===window.pageYOffset&&window.scrollTo(0,0),animateSettings.before(anchor,toggle),smoothScroll.cancelScroll(),window.requestAnimationFrame(loopAnimateScroll)}};var hashChangeHandler=function(event){anchor&&(anchor.id=anchor.getAttribute("data-scroll-id"),smoothScroll.animateScroll(anchor,toggle),anchor=null,toggle=null)},clickHandler=function(event){if(!reduceMotion(settings)&&0===event.button&&!event.metaKey&&!event.ctrlKey&&(toggle=event.target.closest(selector),toggle&&"a"===toggle.tagName.toLowerCase()&&!event.target.closest(settings.ignore)&&toggle.hostname===window.location.hostname&&toggle.pathname===window.location.pathname&&/#/.test(toggle.href))){var hash;try{hash=escapeCharacters(decodeURIComponent(toggle.hash))}catch(e){hash=escapeCharacters(toggle.hash)}if("#"===hash){event.preventDefault(),anchor=document.body;var id=anchor.id?anchor.id:"smooth-scroll-top";return anchor.setAttribute("data-scroll-id",id),anchor.id="",void(window.location.hash.substring(1)===id?hashChangeHandler():window.location.hash=id)}anchor=document.querySelector(hash),anchor&&(anchor.setAttribute("data-scroll-id",anchor.id),anchor.id="",toggle.hash===window.location.hash&&(event.preventDefault(),hashChangeHandler()))}},resizeThrottler=function(event){eventTimeout||(eventTimeout=setTimeout(function(){eventTimeout=null,headerHeight=getHeaderHeight(fixedHeader)},66))};return smoothScroll.destroy=function(){settings&&(document.removeEventListener("click",clickHandler,!1),window.removeEventListener("resize",resizeThrottler,!1),smoothScroll.cancelScroll(),settings=null,anchor=null,toggle=null,fixedHeader=null,headerHeight=null,eventTimeout=null,animationInterval=null)},smoothScroll.init=function(options){supports&&(smoothScroll.destroy(),settings=extend(defaults,options||{}),fixedHeader=settings.header?document.querySelector(settings.header):null,headerHeight=getHeaderHeight(fixedHeader),document.addEventListener("click",clickHandler,!1),window.addEventListener("hashchange",hashChangeHandler,!1),fixedHeader&&window.addEventListener("resize",resizeThrottler,!1))},smoothScroll.init(options),smoothScroll};return SmoothScroll});
var buildServer=buildServer||{};buildServer.main=function(){var app=angular.module("buildServer",[]);app.config(function($interpolateProvider){$interpolateProvider.startSymbol("[[").endSymbol("]]")}),app.controller("ManageUsersController",buildServer.ng.ManageUsersController),app.controller("ManageUserController",buildServer.ng.ManageUserController),app.controller("BuildStatusController",buildServer.ng.BuildStatusController),angular.bootstrap(document,["buildServer"])},buildServer.rpc=function(method,data){return $.ajax({url:"/_grow/api/"+method,type:"POST",data:JSON.stringify(data),contentType:"application/json"})},buildServer.ng=buildServer.ng||{},buildServer.ng.ManageUserController=function($scope,$element){this.$scope=$scope,this.el=$element[0],this.user={},this.email=null},buildServer.ng.ManageUserController.prototype.addToAllUnlocked=function(){[].forEach.call(this.user.folders,function(folder){folder.title.indexOf("Archive")>=1||(folder.has_access=!0)}.bind(this)),this.serializeAndUpdateFolders()},buildServer.ng.ManageUserController.prototype.serializeAndUpdateFolders=function(){var user={email:this.email,folders:this.user.folders};this.update(user)},buildServer.ng.ManageUserController.prototype.setEmail=function(email){this.email=email,this.get()},buildServer.ng.ManageUserController.prototype.deleteUser=function(){buildServer.rpc("users.delete",{user:{email:this.email}}).then(function(resp){window.setTimeout(function(){window.location="/_grow/users"}),this.$scope.$apply()}.bind(this))},buildServer.ng.ManageUserController.prototype.sendEmailNotification=function(user){buildServer.rpc("users.send_email_notification",{user:{email:this.email}}).then(function(resp){alert("An email was sent."),this.$scope.$apply()}.bind(this))},buildServer.ng.ManageUserController.prototype.update=function(user){buildServer.rpc("users.update",{user:user}).then(function(resp){this.setUserResponse(resp.user)}.bind(this))},buildServer.ng.ManageUserController.prototype.setUserResponse=function(user){this.user=user,this.$scope.$apply()},buildServer.ng.ManageUserController.prototype.get=function(){buildServer.rpc("users.get",{user:{email:this.email}}).then(function(resp){this.setUserResponse(resp.user)}.bind(this))},buildServer.ng.ManageUsersController=function($scope){this.$scope=$scope,this.foldersToImport={},this.user={},this.search()},buildServer.ng.ManageUsersController.prototype.search=function(query,opt_nextCursor){this.isLoadingUsers=!0,buildServer.rpc("users.search",{query:query}).then(function(resp){this.isLoadingUsers=!1,this.users=resp.users,this.$scope.$apply()}.bind(this))},buildServer.ng.ManageUsersController.prototype.create=function(email){buildServer.rpc("users.create",{user:{email:email}}).then(function(resp){this.users||(this.users=[]),this.users=this.users.filter(function(user){return user.email!=resp.user.email}),this.users.unshift(resp.user),this.$scope.$apply()}.bind(this))},buildServer.ng.ManageUsersController.prototype.importFromSheets=function(sheetId,sheetGid){var folders=[];this.isWorking=!0;for(var folderId in this.foldersToImport)folders.push({folder_id:folderId,has_access:!0});buildServer.rpc("users.import_from_sheets",{sheet_id:sheetId,folders:folders,sheet_gid:sheetGid}).then(function(resp){console.log(resp),this.isWorking=!1,this.numImported=resp.num_imported,this.$scope.$apply(),this.search()}.bind(this),function(){this.isWorking=!1,this.importError=!0,this.$scope.$apply()}.bind(this))},buildServer.ng.BuildStatusController=function(){},buildServer.ng.BuildStatusController.prototype.rebuild=function(url){$.ajax({url:url,type:"POST"});this.isRebuildRequested=!0};